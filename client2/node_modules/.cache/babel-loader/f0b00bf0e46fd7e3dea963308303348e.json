{"ast":null,"code":"import _classCallCheck from \"/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/src/components/Chat.tsx\";\nimport React from 'react';\nimport { apiEndpoint } from '../config';\nexport var Chat = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Chat, _React$PureComponent);\n\n  function Chat() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Chat)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.configureSocket = function () {\n      var socketQuery = \"\".concat(apiEndpoint, \"?Auth=token\");\n      console.log(socketQuery);\n      var socket = new WebSocket(socketQuery); // connection handler\n\n      socket.addEventListener('open', function (event) {\n        console.log('socket open');\n        console.log(event);\n        socket.send('hello there');\n      }); // message handler\n\n      socket.addEventListener('message', function (event) {\n        console.log('server message received');\n        console.log(\"the response was \".concat(event.data));\n      });\n      socket.addEventListener('error', function (event) {\n        console.log('error from server socket');\n        console.log(event);\n      });\n      socket.addEventListener('close', function (event) {\n        console.log('connection closed by server');\n        console.log(event);\n      });\n\n      _this.setState({\n        socket: socket\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 17\n        }\n      }, \"Hello, this is the home screen\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 17\n        }\n      }, \"Your id token is \", this.props.auth.idToken), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 17\n        }\n      }, \"Your access token is \", this.props.auth.accessToken));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.configureSocket();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.state.socket.close();\n    }\n  }]);\n\n  return Chat;\n}(React.PureComponent);","map":{"version":3,"sources":["/home/fedor/Repositories/gitHub/Udacity/UdaCloudDevCapStone/client2/src/components/Chat.tsx"],"names":["React","apiEndpoint","Chat","configureSocket","socketQuery","console","log","socket","WebSocket","addEventListener","event","send","data","setState","props","auth","idToken","accessToken","state","close","PureComponent"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,SAAQC,WAAR,QAA0B,WAA1B;AAYA,WAAaC,IAAb;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,UAuBIC,eAvBJ,GAuBsB,YAAM;AACpB,UAAMC,WAAW,aAAMH,WAAN,gBAAjB;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;AACA,UAAMG,MAAM,GAAG,IAAIC,SAAJ,CAAcJ,WAAd,CAAf,CAHoB,CAKpB;;AACAG,MAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,UAAAC,KAAK,EAAI;AACrCL,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AAEAH,QAAAA,MAAM,CAACI,IAAP,CAAY,aAAZ;AACH,OALD,EANoB,CAapB;;AACAJ,MAAAA,MAAM,CAACE,gBAAP,CAAwB,SAAxB,EAAmC,UAAAC,KAAK,EAAI;AACxCL,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,4BAAgCI,KAAK,CAACE,IAAtC;AACH,OAHD;AAKAL,MAAAA,MAAM,CAACE,gBAAP,CAAwB,OAAxB,EAAiC,UAAAC,KAAK,EAAI;AACtCL,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AACH,OAHD;AAKAH,MAAAA,MAAM,CAACE,gBAAP,CAAwB,OAAxB,EAAiC,UAAAC,KAAK,EAAI;AACtCL,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AACH,OAHD;;AAKA,YAAKG,QAAL,CAAc;AAACN,QAAAA,MAAM,EAAEA;AAAT,OAAd;AACH,KArDL;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAEY;AAEJ,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAqB,KAAKO,KAAL,CAAWC,IAAX,CAAgBC,OAArC,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAyB,KAAKF,KAAL,CAAWC,IAAX,CAAgBE,WAAzC,CAHJ,CADJ;AASH;AAbL;AAAA;AAAA,wCAeuB;AACf,WAAKd,eAAL;AACH;AAjBL;AAAA;AAAA,2CAmB0B;AAClB,WAAKe,KAAL,CAAWX,MAAX,CAAkBY,KAAlB;AACH;AArBL;;AAAA;AAAA,EAA0BnB,KAAK,CAACoB,aAAhC","sourcesContent":["import React from 'react'\nimport Auth from '../auth/Auth'\nimport {History} from 'history'\nimport {apiEndpoint} from '../config'\n\n\ninterface ChatProps{\n    auth: Auth,\n    history: History\n}\n\ninterface ChatState{\n    socket: WebSocket\n}\n\nexport class Chat extends React.PureComponent<ChatProps, ChatState>{\n\n    render(){\n\n        return(\n            <div>\n                <p>Hello, this is the home screen</p>\n                <p>Your id token is {this.props.auth.idToken}</p>\n                <p>Your access token is {this.props.auth.accessToken}</p>\n            </div>\n            \n        )\n\n    }\n\n    componentDidMount(){\n        this.configureSocket()\n    }\n\n    componentWillUnmount(){\n        this.state.socket.close()\n    }\n\n    configureSocket = () => {\n        const socketQuery = `${apiEndpoint}?Auth=token`\n        console.log(socketQuery)\n        const socket = new WebSocket(socketQuery)\n\n        // connection handler\n        socket.addEventListener('open', event => {\n            console.log('socket open')\n            console.log(event)\n\n            socket.send('hello there')\n        })\n\n        // message handler\n        socket.addEventListener('message', event => {\n            console.log('server message received')\n            console.log(`the response was ${event.data}`)\n        })\n\n        socket.addEventListener('error', event => {\n            console.log('error from server socket')\n            console.log(event)\n        })\n\n        socket.addEventListener('close', event => {\n            console.log('connection closed by server')\n            console.log(event)\n        })\n\n        this.setState({socket: socket})\n    }\n\n}"]},"metadata":{},"sourceType":"module"}